#Fogo Doom com paleta de cores

import cv2 as cv
import numpy as np
from random import randint
from random import randint
# (mHig - 1) * mWid = 6'400
#Paleta de cores para fogo Azul.
#palet = [[0x07,0x07,0x07],[0x1F,0x07,0x07],[0x2F,0x0F,0x07],[0x47,0x0F,0x07],[0x57,0x17,0x07],[0x67,0x1F,0x07],[0x77,0x1F,0x07],[0x8F,0x27,0x07],[0x9F,0x2F,0x07],[0xAF,0x3F,0x07],[0xBF,0x47,0x07],[0xC7,0x47,0x07],[0xDF,0x4F,0x07],[0xDF,0x57,0x07],[0xDF,0x57,0x07],[0xD7,0x5F,0x07],[0xD7,0x5F,0x07],[0xD7,0x67,0x0F],[0xCF,0x6F,0x0F],[0xCF,0x77,0x0F],[0xCF,0x7F,0x0F],[0xCF,0x87,0x17],[0xC7,0x87,0x17],[0xC7,0x8F,0x17],[0xC7,0x97,0x1F],[0xBF,0x9F,0x1F],[0xBF,0x9F,0x1F],[0xBF,0xA7,0x27],[0xBF,0xA7,0x27],[0xBF,0xAF,0x2F],[0xB7,0xAF,0x2F],[0xB7,0xB7,0x2F],[0xB7,0xB7,0x37],[0xCF,0xCF,0x6F],[0xDF,0xDF,0x9F],[0xEF,0xEF,0xC7],[0xFF,0xFF,0xFF]]
#Paleta de cores para fogo Vermelho. (na original, palet[0] = [0x07,0x07,0x07])
palet = [[0x00,0x00,0x00],[0x07,0x07,0x1F],[0x07,0x0F,0x2F],[0x07,0x0F,0x47],[0x07,0x17,0x57],[0x07,0x1F,0x67],[0x07,0x1F,0x77],[0x07,0x27,0x8F],[0x07,0x2F,0x9F],[0x07,0x3F,0xAF],[0x07,0x47,0xBF],[0x07,0x47,0xC7],[0x07,0x4F,0xDF],[0x07,0x57,0xDF],[0x07,0x57,0xDF],[0x07,0x5F,0xD7],[0x07,0x5F,0xD7],[0x0F,0x67,0xD7],[0x0F,0x6F,0xCF],[0x0F,0x77,0xCF],[0x0F,0x7F,0xCF],[0x17,0x87,0xCF],[0x17,0x87,0xC7],[0x17,0x8F,0xC7],[0x1F,0x97,0xC7],[0x1F,0x9F,0xBF],[0x1F,0x9F,0xBF],[0x27,0xA7,0xBF],[0x27,0xA7,0xBF],[0x2F,0xAF,0xBF],[0x2F,0xAF,0xB7],[0x2F,0xB7,0xB7],[0x37,0xB7,0xB7],[0x6F,0xCF,0xCF],[0x9F,0xDF,0xDF],[0xC7,0xEF,0xEF],[0xFF,0xFF,0xFF]]
tPix = 10 #(10)
mHig = tPix*20 #Precisa ser multiplo de tPix.(20)
mWid = tPix*30 #Precisa ser multiplo de tPix.(20)
decay = 8 #Inverso da intensidade (8)
add = 1 #Incremento/Decremento pelas teclas 'a' e 'd'
font = 36

matriz = np.zeros((mHig, mWid, 3), np.uint8)
matInt = np.zeros((mHig, mWid), np.uint8)#Matriz de intensidade.

print("\n-> press:\nd/a: increase/decrease fuel\nw/s: increase/decrease oxygen\n")
#Iniciação/perpetuação do fogo
while(True):
	for col in range(0, mWid, tPix):
		for lin in range(0, mHig, tPix):
			if lin == mHig - tPix: # Caso seja a ultima linha, considerar a linha de baixo (inexistente) como tendo intensidade 36 (não mostrar a fonte do fogo)
				att = font - randint(0, decay)	
			else: 
				att = matInt[lin + tPix][col] - randint(0, decay)
			if att > 0:
				for l in range(0,tPix):
					for c in range(0,tPix):
						matInt[lin + l][col + c] = att
						matriz[lin + l][col + c] = palet[att]
	cv.imshow('frame',matriz)
	key = cv.waitKey(1)
	if key & 0xFF == ord('q'):
	    break
	elif key == 97:
		decay += add
	elif key == 100 and decay > add:
		decay -= add
	elif key == 115 and font >= 0:
		font -= 1
	elif key == 119 and font < 36:
		font += 1
		
cv.destroyAllWindows()
#Adicionar vento e trackbar.